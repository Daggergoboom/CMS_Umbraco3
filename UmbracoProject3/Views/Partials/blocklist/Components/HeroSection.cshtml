@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage<Umbraco.Cms.Core.Models.Blocks.BlockListItem>
@using Umbraco.Cms.Core.Models.PublishedContent
@using System.Collections.Generic
@using System.Linq
@using Umbraco.Cms.Core.Models

@{
    // Hero background image - funkar både single och multiple picker
    IPublishedContent bgImage = null;

    if (Model.Content.HasValue("heroBackgroundImage"))
    {
        // Försök läsa som multiple
        var bgImages = Model.Content.Value<IEnumerable<IPublishedContent>>("heroBackgroundImage");
        bgImage = bgImages?.FirstOrDefault();

        // Om null → försök som single
        if (bgImage == null)
            bgImage = Model.Content.Value<IPublishedContent>("heroBackgroundImage");
    }

    var heroTitle = Model.Content.Value<string>("heroTitle");
    var heroText = Model.Content.Value<string>("heroText");
    var heroButtonText = Model.Content.Value<string>("heroButtonText");
    var heroButtonLink = Model.Content.Value<IEnumerable<Link>>("heroButtonLink");
}

<section class="relative py-[7rem]">
    <div class="absolute inset-0">
        @if (bgImage != null)
        {
            var bgUrl = bgImage.Url();
            if (!string.IsNullOrWhiteSpace(bgUrl))
            {
                <img src="@bgUrl" class="w-full h-full object-cover" />
            }
        }
    </div>

    <div class="container mx-auto px-4 relative z-10" style="max-width: 1280px;">
        <div class="w-5/12 flex flex-col gap-8">
            @if (!string.IsNullOrWhiteSpace(heroTitle))
            {
                <h1 class="text-[4.5rem] text-[#4F5955] font-bold leading-none">
                    @heroTitle
                </h1>
            }

            @if (!string.IsNullOrWhiteSpace(heroText))
            {
                <div class="rte">
                    @Html.Raw(heroText)
                </div>
            }

            @if (!string.IsNullOrWhiteSpace(heroButtonText) && heroButtonLink != null)
            {
                var link = heroButtonLink.FirstOrDefault();
                if (link != null)
                {
                    <a href="@link.Url" target="@link.Target" class="btn-primary self-start">
                        @heroButtonText
                    </a>
                }
            }
        </div>
    </div>
</section>